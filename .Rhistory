ifelse(V2 == "10K", 10000,
ifelse(V2 == "20K", 20000,
ifelse(V2 == "30K", 30000,
ifelse(V2 == "40K", 40000,
ifelse(V2 == "50K", 50000,
ifelse(V2 == "60K", 60000,
ifelse(V2 == "70K", 70000,
ifelse(V2 == "80K", 80000,
ifelse(V2 == "90K", 90000,
ifelse(V2 == "100K", 100000,
ifelse(V2 == "110K", 110000,
ifelse(V2 == "120K", 120000,
ifelse(V2 == "130K", 130000,
ifelse(V2 == "140K", 140000,
ifelse(V2 == "150K", 150000,
ifelse(V2 == "160K", 160000,
ifelse(V2 == "170K", 170000,
ifelse(V2 == "180K", 180000,
ifelse(V2 == "190K", 190000,
ifelse(V2 == "200K", 200000, NA))))))))))))))))))))),
Perspective = ifelse(V3 == "TOTAL", "Societal", "Health Sector")) %>% select(Threshold, Perspective)
tbl_df_CEAC_plot <- cbind(tbl_df_labels, tbl_df_CEAC_long) %>% as_tibble() %>% rename(p_BNX_CE = Proportion) %>% mutate(p_MET_CE = (1 - p_BNX_CE))
View(tbl_df_CEAC_plot)
#################
### Plot CEAC ###
#################
ggplot(data = tbl_df_CEAC_plot, aes(x = Threshold, group = Perspective)) +
geom_line(aes(y = p_BNX_CE, colour = "#f46d43")) +
geom_line(aes(y = p_MET_CE, colour = "#313695")) +
theme_classic()
View(tbl_df_labels)
View(tbl_df_CEAC_plot)
tbl_df_CEAC_plot <- cbind(tbl_df_labels, tbl_df_CEAC_long) %>% as_tibble() %>% rename(p_BNX_CE = Proportion) #%>% mutate(p_MET_CE = (1 - p_BNX_CE),
View(tbl_df_CEAC_plot)
tbl_df_CEAC_plot <- cbind(tbl_df_labels, tbl_df_CEAC_long) %>% as_tibble() %>% rename(p_BNX_CE = Proportion) %>% mutate(Treatment = BNX) #%>% mutate(p_MET_CE = (1 - p_BNX_CE),
tbl_df_CEAC_plot <- cbind(tbl_df_labels, tbl_df_CEAC_long) %>% as_tibble() %>% rename(p_BNX_CE = Proportion) %>% mutate(Treatment = "BNX") #%>% mutate(p_MET_CE = (1 - p_BNX_CE),
View(tbl_df_CEAC_plot)
tbl_df_CEAC_plot <- cbind(tbl_df_labels, tbl_df_CEAC_long) %>% as_tibble() %>% mutate(Treatment = "BNX") #%>% mutate(p_MET_CE = (1 - p_BNX_CE),
View(tbl_df_CEAC_plot)
tbl_df_CEAC_MET <- cbind(tbl_df_labels, tbl_df_CEAC_long) %>% as_tibble() %>% mutate(Treatment = "MET",
Proportion_MET = (1 - Proportion))
View(tbl_df_CEAC_MET)
View(tbl_df_CEAC_MET)
tbl_df_CEAC_MET <- cbind(tbl_df_labels, tbl_df_CEAC_long) %>% as_tibble() %>% mutate(Treatment = "MET",
Proportion_MET = (1 - Proportion)) %>% select(-Proportion)
View(tbl_df_CEAC_MET)
tbl_df_CEAC_MET <- cbind(tbl_df_labels, tbl_df_CEAC_long) %>% as_tibble() %>% mutate(Treatment = "MET",
Proportion_MET = (1 - Proportion)) %>% select(-Proportion) %>%
rename(Proportion = Proportion_MET)
View(tbl_df_CEAC_MET)
tbl_df_CEAC_BNX <- cbind(tbl_df_labels, tbl_df_CEAC_long) %>% as_tibble() %>% mutate(Treatment = "BNX")
tbl_df_CEAC_MET <- cbind(tbl_df_labels, tbl_df_CEAC_long) %>% as_tibble() %>% mutate(Treatment = "MET",
Proportion_MET = (1 - Proportion)) %>% select(-Proportion) %>%
rename(Proportion = Proportion_MET)
View(tbl_df_CEAC_BNX)
View(tbl_df_CEAC_MET)
tbl_df_CEAC_BNX <- cbind(tbl_df_labels, tbl_df_CEAC_long) %>% as_tibble() %>% mutate(Treatment = "BNX",
Treatment (perspective) = ifelse(Perspective == "Societal" & Treatment == "BNX", "BNX (Societal)",
Perspective == "Health Sector" & Treatment == "BNX", "BNX (Health Sector)"))
tbl_df_CEAC_BNX <- cbind(tbl_df_labels, tbl_df_CEAC_long) %>% as_tibble() %>% mutate(Treatment = "BNX",
Treatment (perspective) = ifelse(Perspective == "Societal" & Treatment == "BNX", "BNX (Societal)",
Perspective == "Health Sector" & Treatment == "BNX", "BNX (Health Sector)",NA))
tbl_df_CEAC_BNX <- cbind(tbl_df_labels, tbl_df_CEAC_long) %>% as_tibble() %>% mutate(Treatment = "BNX",
Treatment (perspective) = ifelse(Perspective == "Societal" & Treatment == "BNX", "BNX (Societal)",
Perspective == "Health Sector" & Treatment == "BNX", "BNX (Health Sector)",NA))
tbl_df_CEAC_BNX <- cbind(tbl_df_labels, tbl_df_CEAC_long) %>% as_tibble() %>% mutate(Treatment = "BNX",
Treatment (perspective) = ifelse(Perspective == "Societal" & Treatment == "BNX", "BNX (Societal)",
(Perspective == "Health Sector" & Treatment == "BNX", "BNX (Health Sector)", NA)))
tbl_df_CEAC_BNX <- cbind(tbl_df_labels, tbl_df_CEAC_long) %>% as_tibble() %>% mutate(Treatment = "BNX",
Treatment (perspective) = ifelse(Perspective == "Societal" & Treatment == "BNX", "BNX (Societal)",
Perspective == "Health Sector" & Treatment == "BNX", "BNX (Health Sector)", NA))
tbl_df_CEAC_BNX <- cbind(tbl_df_labels, tbl_df_CEAC_long) %>% as_tibble() %>% mutate(Treatment = "BNX",
Treatment (perspective) = ifelse(Perspective == "Societal" & Treatment == "BNX", "BNX (Societal)",
ifelse(Perspective == "Health Sector" & Treatment == "BNX", "BNX (Health Sector)", NA)))
tbl_df_CEAC_BNX <- cbind(tbl_df_labels, tbl_df_CEAC_long) %>% as_tibble() %>% mutate(Treatment = "BNX",
tx_perspective = ifelse(Perspective == "Societal" & Treatment == "BNX", "BNX (Societal)",
ifelse(Perspective == "Health Sector" & Treatment == "BNX", "BNX (Health Sector)", NA)))
View(tbl_df_CEAC_BNX)
View(tbl_df_CEAC_BNX)
tbl_df_CEAC_BNX <- cbind(tbl_df_labels, tbl_df_CEAC_long) %>% as_tibble() %>% mutate(Treatment = "BNX",
tx_perspective = ifelse(Perspective == "Societal" & Treatment == "BNX", "BNX (Societal)",
ifelse(Perspective == "Health Sector" & Treatment == "BNX", "BNX (Health Sector)", NA))) %>%
select(-Scenario)
View(tbl_df_CEAC_BNX)
tbl_df_CEAC_MET <- cbind(tbl_df_labels, tbl_df_CEAC_long) %>% as_tibble() %>% mutate(Treatment = "MET",
Proportion_MET = (1 - Proportion)) %>% select(-Proportion) %>%
rename(Proportion = Proportion_MET) %>%
mutate(tx_perspective = ifelse(Perspective == "Societal" & Treatment == "BNX", "BNX (Societal)",
ifelse(Perspective == "Health Sector" & Treatment == "BNX", "BNX (Health Sector)", NA)))
View(tbl_df_CEAC_MET)
tbl_df_CEAC_MET <- cbind(tbl_df_labels, tbl_df_CEAC_long) %>% as_tibble() %>% mutate(Treatment = "MET",
Proportion_MET = (1 - Proportion)) %>% select(-Proportion) %>%
rename(Proportion = Proportion_MET) %>%
mutate(tx_perspective = ifelse(Perspective == "Societal", "MET (Societal)",
ifelse(Perspective == "Health Sector", "MET (Health Sector)", NA)))
View(tbl_df_CEAC_MET)
tbl_df_CEAC_MET <- cbind(tbl_df_labels, tbl_df_CEAC_long) %>% as_tibble() %>% mutate(Treatment = "MET",
Proportion_MET = (1 - Proportion)) %>% select(-Proportion) %>%
rename(Proportion = Proportion_MET) %>%
mutate(tx_perspective = ifelse(Perspective == "Societal", "MET (Societal)",
ifelse(Perspective == "Health Sector", "MET (Health Sector)", NA))) %>%
select(-Scenario)
View(tbl_df_CEAC_MET)
View(tbl_df_CEAC_BNX)
tbl_df_CEAC_BNX <- cbind(tbl_df_labels, tbl_df_CEAC_long) %>% as_tibble() %>% mutate(Treatment = "BNX",
tx_perspective = ifelse(Perspective == "Societal", "BNX (Societal)",
ifelse(Perspective == "Health Sector", "BNX (Health Sector)", NA))) %>%
select(-Scenario, Threshold, Perspective, Treatment, Proportion, tx_perspective)
View(tbl_df_CEAC_BNX)
tbl_df_CEAC_BNX <- cbind(tbl_df_labels, tbl_df_CEAC_long) %>% as_tibble() %>% mutate(Treatment = "BNX",
tx_perspective = ifelse(Perspective == "Societal", "BNX (Societal)",
ifelse(Perspective == "Health Sector", "BNX (Health Sector)", NA))) %>%
select(-Scenario) %>% col_order <- c("Threshold", "Perspective", "Treatment", "Proportion", "tx_perspective")
View(tbl_df_CEAC_BNX)
tbl_df_CEAC_BNX <- cbind(tbl_df_labels, tbl_df_CEAC_long) %>% as_tibble() %>% mutate(Treatment = "BNX",
tx_perspective = ifelse(Perspective == "Societal", "BNX (Societal)",
ifelse(Perspective == "Health Sector", "BNX (Health Sector)", NA))) %>%
select(-Scenario) %>% relocate("Proportion", .after = "Treatment")
View(tbl_df_CEAC_BNX)
View(tbl_df_CEAC_MET)
tbl_df_CEAC <- rbind(tbl_df_CEAC_BNX, tbl_df_CEAC_MET)
View(tbl_df_CEAC)
tbl_df_CEAC_plot <- rbind(tbl_df_CEAC_BNX, tbl_df_CEAC_MET)
View(tbl_df_CEAC)
#################
### Plot CEAC ###
#################
ggplot(data = tbl_df_CEAC_plot, aes(x = Threshold, group = tx_perspective)) +
scale_color_manual(name = '',
breaks = c('BNX (Societal)', 'BNX (Health Sector)', 'MET (Societal)', 'MET (Health Sector)'),
values = c('BNX (Societal)' = "#313695", 'BNX (Health Sector)' = "#f46d43", 'MET (Societal)' = "#2166ac", 'MET (Health Sector)' = "#d7191c")) +
geom_line(linetype = "solid", size = 1) +
#geom_line(aes(y = p_BNX_CE, colour = "#f46d43")) +
#geom_line(aes(y = p_MET_CE, colour = "#313695")) +
theme_classic()
#################
### Plot CEAC ###
#################
ggplot(data = tbl_df_CEAC_plot, aes(x = Threshold, group = tx_perspective)) +
scale_color_manual(name = '',
breaks = c('BNX (Societal)', 'BNX (Health Sector)', 'MET (Societal)', 'MET (Health Sector)'),
values = c('BNX (Societal)' = "#313695", 'BNX (Health Sector)' = "#f46d43", 'MET (Societal)' = "#2166ac", 'MET (Health Sector)' = "#d7191c")) +
geom_line(y = Proportion, linetype = "solid", size = 1) +
#geom_line(aes(y = p_BNX_CE, colour = "#f46d43")) +
#geom_line(aes(y = p_MET_CE, colour = "#313695")) +
theme_classic()
View(tbl_df_CEAC_plot)
tbl_df_CEAC_plot <- rbind(tbl_df_CEAC_BNX, tbl_df_CEAC_MET)
#################
### Plot CEAC ###
#################
ggplot(data = tbl_df_CEAC_plot, aes(x = Threshold, group = tx_perspective)) +
scale_color_manual(name = '',
breaks = c('BNX (Societal)', 'BNX (Health Sector)', 'MET (Societal)', 'MET (Health Sector)'),
values = c('BNX (Societal)' = "#313695", 'BNX (Health Sector)' = "#f46d43", 'MET (Societal)' = "#2166ac", 'MET (Health Sector)' = "#d7191c")) +
geom_line(y = Proportion, linetype = "solid", size = 1) +
#geom_line(aes(y = p_BNX_CE, colour = "#f46d43")) +
#geom_line(aes(y = p_MET_CE, colour = "#313695")) +
theme_classic()
#################
### Plot CEAC ###
#################
ggplot(data = tbl_df_CEAC_plot, aes(x = Threshold, group = tx_perspective)) +
scale_color_manual(name = '',
breaks = c('BNX (Societal)', 'BNX (Health Sector)', 'MET (Societal)', 'MET (Health Sector)'),
values = c('BNX (Societal)' = "#313695", 'BNX (Health Sector)' = "#f46d43", 'MET (Societal)' = "#2166ac", 'MET (Health Sector)' = "#d7191c")) +
geom_line(aes(y = Proportion, linetype = "solid", size = 1)) +
#geom_line(aes(y = p_BNX_CE, colour = "#f46d43")) +
#geom_line(aes(y = p_MET_CE, colour = "#313695")) +
theme_classic()
#################
### Plot CEAC ###
#################
ggplot(data = tbl_df_CEAC_plot, aes(x = Threshold, group = tx_perspective)) +
scale_color_manual(name = '',
breaks = c('BNX (Societal)', 'BNX (Health Sector)', 'MET (Societal)', 'MET (Health Sector)'),
values = c('BNX (Societal)' = "#313695", 'BNX (Health Sector)' = "#f46d43", 'MET (Societal)' = "#2166ac", 'MET (Health Sector)' = "#d7191c")) +
geom_line(aes(y = Proportion, linetype = "solid", size = 0.5)) +
#geom_line(aes(y = p_BNX_CE, colour = "#f46d43")) +
#geom_line(aes(y = p_MET_CE, colour = "#313695")) +
theme_classic()
#################
### Plot CEAC ###
#################
ggplot(data = tbl_df_CEAC_plot, aes(x = Threshold, group = tx_perspective)) +
scale_color_manual(name = '',
breaks = c('BNX (Societal)', 'BNX (Health Sector)', 'MET (Societal)', 'MET (Health Sector)'),
values = c('BNX (Societal)' = "#313695", 'BNX (Health Sector)' = "#f46d43", 'MET (Societal)' = "#2166ac", 'MET (Health Sector)' = "#d7191c")) +
geom_line(aes(y = Proportion, linetype = "solid", size = 0.5))
View(tbl_df_CEAC_plot)
tbl_df_CEAC_mid <- tbl_df_CEAC_plot %>% mutate(p_BNX_soc = ifelse(tx_perspective == "BNX (Societal)", Proportion, NA),
p_BNX_hs = ifelse(tx_perspective == "BNX (Health Sector)", Proportion, NA),
p_MET_soc = ifelse(tx_perspective == "MET (Societal)", Proportion, NA),
p_MET_hs = ifelse(tx_perspective == "MET (Health Sector)", Proportion, NA))
View(tbl_df_CEAC_mid)
tbl_df_CEAC_BNX_soc <- tbl_df_CEAC_mid %>% select(threshold, p_BNX_soc)
tbl_df_CEAC_BNX_soc <- tbl_df_CEAC_mid %>% select(Threshold, p_BNX_soc)
View(tbl_df_CEAC_BNX_soc)
tbl_df_CEAC_BNX_soc <- tbl_df_CEAC_mid %>% select(Threshold, p_BNX_soc) %>% na.omit()
View(tbl_df_CEAC_BNX_soc)
tbl_df_CEAC_BNX_soc <- tbl_df_CEAC_mid %>% select(Threshold, p_BNX_soc) %>% na.omit()
tbl_df_CEAC_BNX_hs  <- tbl_df_CEAC_mid %>% select(Threshold, p_BNX_hs) %>% na.omit()
tbl_df_CEAC_MET_soc <- tbl_df_CEAC_mid %>% select(Threshold, p_MET_soc) %>% na.omit()
tbl_df_CEAC_MET_hs  <- tbl_df_CEAC_mid %>% select(Threshold, p_MET_hs) %>% na.omit()
View(tbl_df_CEAC_MET_hs)
tbl_df_CEAC_temp1 <- left_join(tbl_df_CEAC_BNX_soc, tbl_df_CEAC_BNX_hs, by = join_by("Threshold" == "Threshold"))
tbl_df_CEAC_temp1 <- left_join(tbl_df_CEAC_BNX_soc, tbl_df_CEAC_BNX_hs, by = c("Threshold" == "Threshold"))
tbl_df_CEAC_temp1 <- merge(x = tbl_df_CEAC_BNX_soc, y = tbl_df_CEAC_BNX_hs,
by = "Threshold", all.x = TRUE)
View(tbl_df_CEAC_temp1)
tbl_df_CEAC_temp1 <- merge(x = tbl_df_CEAC_BNX_soc, y = tbl_df_CEAC_MET_soc,
by = "Threshold", all.x = TRUE)
View(tbl_df_CEAC_temp1)
tbl_df_CEAC_temp2 <- merge(x = tbl_df_CEAC_temp1, y = tbl_df_CEAC_BNX_hs,
by = "Threshold", all.x = TRUE)
View(tbl_df_CEAC_temp2)
tbl_df_CEAC_plot  <- merge(x = tbl_df_CEAC_temp2, y = tbl_df_CEAC_MET_hs,
by = "Threshold", all.x = TRUE)
View(tbl_df_CEAC_plot)
#################
### Plot CEAC ###
#################
ggplot(data = tbl_df_CEAC_plot, aes(x = Threshold)) +
#scale_color_manual(name = '',
#                   breaks = c('BNX (Societal)', 'BNX (Health Sector)', 'MET (Societal)', 'MET (Health Sector)'),
#                   values = c('BNX (Societal)' = "#313695", 'BNX (Health Sector)' = "#f46d43", 'MET (Societal)' = "#2166ac", 'MET (Health Sector)' = "#d7191c")) +
geom_line(aes(y = p_BNX_hs, linetype = "solid", colour = "#f46d43")) +
geom_line(aes(y = p_MET_hs, linetype = "solid", colour = "#d7191c")) +
geom_line(aes(y = p_BNX_soc, linetype = "solid", colour = "#313695")) +
geom_line(aes(y = p_MET_soc, linetype = "solid", colour = "#2166ac")) +
#geom_line(aes(y = p_BNX_CE, colour = "#f46d43")) +
#geom_line(aes(y = p_MET_CE, colour = "#313695")) +
theme_classic()
#################
### Plot CEAC ###
#################
ggplot(data = tbl_df_CEAC_plot, aes(x = Threshold)) +
#scale_color_manual(name = '',
#                   breaks = c('BNX (Societal)', 'BNX (Health Sector)', 'MET (Societal)', 'MET (Health Sector)'),
#                   values = c('BNX (Societal)' = "#313695", 'BNX (Health Sector)' = "#f46d43", 'MET (Societal)' = "#2166ac", 'MET (Health Sector)' = "#d7191c")) +
geom_line(aes(y = p_BNX_hs, linetype = "dashed", colour = "#313695")) +
geom_line(aes(y = p_MET_hs, linetype = "dashed", colour = "#d7191c")) +
geom_line(aes(y = p_BNX_soc, linetype = "solid", colour = "#313695")) +
geom_line(aes(y = p_MET_soc, linetype = "solid", colour = "#d7191c")) +
#geom_line(aes(y = p_BNX_CE, colour = "#f46d43")) +
#geom_line(aes(y = p_MET_CE, colour = "#313695")) +
theme_classic()
#################
### Plot CEAC ###
#################
ggplot(data = tbl_df_CEAC_plot, aes(x = Threshold)) +
#scale_color_manual(name = '',
#                   breaks = c('BNX (Societal)', 'BNX (Health Sector)', 'MET (Societal)', 'MET (Health Sector)'),
#                   values = c('BNX (Societal)' = "#313695", 'BNX (Health Sector)' = "#f46d43", 'MET (Societal)' = "#2166ac", 'MET (Health Sector)' = "#d7191c")) +
geom_line(aes(y = p_BNX_hs, linetype = "dashed", colour = "#313695")) +
geom_line(aes(y = p_MET_hs, linetype = "dashed", colour = "#d7191c")) +
geom_line(aes(y = p_BNX_soc, linetype = "solid", colour = "#313695")) +
geom_line(aes(y = p_MET_soc, linetype = "solid", colour = "#d7191c")) #+
#################
### Plot CEAC ###
#################
ggplot() +
geom_line(aes(data = tbl_df_CEAC_plot, x = Threshold, y = p_BNX_hs, linetype = "dashed", colour = "#313695")) +
geom_line(aes(data = tbl_df_CEAC_plot, x = Threshold, y = p_MET_hs, linetype = "dashed", colour = "#d7191c")) +
geom_line(aes(data = tbl_df_CEAC_plot, x = Threshold, y = p_BNX_soc, linetype = "solid", colour = "#313695")) +
geom_line(aes(data = tbl_df_CEAC_plot, x = Threshold, y = p_MET_soc, linetype = "solid", colour = "#d7191c")) #+
#################
### Plot CEAC ###
#################
ggplot() +
geom_line(data = tbl_df_CEAC_plot, aes(x = Threshold, y = p_BNX_hs, linetype = "dashed", colour = "#313695")) +
geom_line(data = tbl_df_CEAC_plot, aes(x = Threshold, y = p_MET_hs, linetype = "dashed", colour = "#d7191c")) +
geom_line(data = tbl_df_CEAC_plot, aes(x = Threshold, y = p_BNX_soc, linetype = "solid", colour = "#313695")) +
geom_line(data = tbl_df_CEAC_plot, aes(x = Threshold, y = p_MET_soc, linetype = "solid", colour = "#d7191c")) #+
#################
### Plot CEAC ###
#################
ggplot() +
geom_line(data = tbl_df_CEAC_plot, aes(x = Threshold, y = p_BNX_hs, linetype = "dashed", colour = "#313695")) +
geom_line(data = tbl_df_CEAC_plot, aes(x = Threshold, y = p_MET_hs, linetype = "dashed", colour = "#d7191c")) +
geom_line(data = tbl_df_CEAC_plot, aes(x = Threshold, y = p_BNX_soc, linetype = "solid", colour = "#313695")) +
geom_line(data = tbl_df_CEAC_plot, aes(x = Threshold, y = p_MET_soc, linetype = "solid", colour = "#d7191c")) +
#geom_line(aes(y = p_BNX_CE, colour = "#f46d43")) +
#geom_line(aes(y = p_MET_CE, colour = "#313695")) +
#theme_classic()
theme(panel.grid.major = element_blank(), panel.grid.minor = element_blank(), panel.background = element_blank(), axis.line = element_line(colour = "black"),
legend.key = element_rect(fill = "transparent", colour = "transparent"),
plot.title = element_text(hjust=0.02, vjust=-7),
legend.position = "bottom",
text = element_text(size = 15))
#################
### Plot CEAC ###
#################
ggplot() +
geom_line(data = tbl_df_CEAC_plot, aes(x = Threshold, y = p_BNX_hs, linetype = "dashed", colour = "#313695")) +
geom_line(data = tbl_df_CEAC_plot, aes(x = Threshold, y = p_MET_hs, linetype = "dashed", colour = "#d7191c")) +
geom_line(data = tbl_df_CEAC_plot, aes(x = Threshold, y = p_BNX_soc, linetype = "solid", colour = "#313695")) +
geom_line(data = tbl_df_CEAC_plot, aes(x = Threshold, y = p_MET_soc, linetype = "solid", colour = "#d7191c")) +
#geom_line(aes(y = p_BNX_CE, colour = "#f46d43")) +
#geom_line(aes(y = p_MET_CE, colour = "#313695")) +
#theme_classic()
theme(panel.grid.major = element_blank(), panel.grid.minor = element_blank(), panel.background = element_blank(), axis.line = element_line(colour = "black"),
legend.key = element_rect(fill = "transparent", colour = "transparent"),
plot.title = element_text(hjust=0.02, vjust=-7),
legend.position = "right",
text = element_text(size = 15))
#################
### Plot CEAC ###
#################
plot_CEAC <- ggplot() +
geom_line(data = tbl_df_CEAC_plot, aes(x = Threshold, y = p_BNX_hs, linetype = "dashed", colour = "#313695")) +
geom_line(data = tbl_df_CEAC_plot, aes(x = Threshold, y = p_MET_hs, linetype = "dashed", colour = "#d7191c")) +
geom_line(data = tbl_df_CEAC_plot, aes(x = Threshold, y = p_BNX_soc, linetype = "solid", colour = "#313695")) +
geom_line(data = tbl_df_CEAC_plot, aes(x = Threshold, y = p_MET_soc, linetype = "solid", colour = "#d7191c")) +
#geom_line(aes(y = p_BNX_CE, colour = "#f46d43")) +
#geom_line(aes(y = p_MET_CE, colour = "#313695")) +
#theme_classic()
theme(panel.grid.major = element_blank(), panel.grid.minor = element_blank(), panel.background = element_blank(), axis.line = element_line(colour = "black"),
legend.key = element_rect(fill = "transparent", colour = "transparent"),
plot.title = element_text(hjust=0.02, vjust=-7),
legend.position = "right",
text = element_text(size = 15))
# Output full plot
ggsave(plot_CEAC,
filename = "Plots/PSA/CEAC.png",
width = 10, height = 7, dpi = 350)
View(tbl_df_CEAC_plot)
#################
### Plot CEAC ###
#################
plot_CEAC <- ggplot() +
geom_line(data = tbl_df_CEAC_plot, aes(x = Threshold, y = p_BNX_hs, linetype = "dashed", color = "#313695")) +
geom_line(data = tbl_df_CEAC_plot, aes(x = Threshold, y = p_MET_hs, linetype = "dashed", color = "#d7191c")) +
geom_line(data = tbl_df_CEAC_plot, aes(x = Threshold, y = p_BNX_soc, linetype = "solid", color = "#313695")) +
geom_line(data = tbl_df_CEAC_plot, aes(x = Threshold, y = p_MET_soc, linetype = "solid", color = "#d7191c")) +
#geom_line(aes(y = p_BNX_CE, colour = "#f46d43")) +
#geom_line(aes(y = p_MET_CE, colour = "#313695")) +
#theme_classic()
theme(panel.grid.major = element_blank(), panel.grid.minor = element_blank(), panel.background = element_blank(), axis.line = element_line(colour = "black"),
legend.key = element_rect(fill = "transparent", colour = "transparent"),
plot.title = element_text(hjust=0.02, vjust=-7),
legend.position = "right",
text = element_text(size = 15))
# Output full plot
ggsave(plot_CEAC,
filename = "Plots/PSA/CEAC.png",
width = 10, height = 7, dpi = 350)
tbl_df_CEAC_plot <- rbind(tbl_df_CEAC_BNX, tbl_df_CEAC_MET)
tbl_df_CEAC_mid <- tbl_df_CEAC_plot %>% mutate(p_BNX_soc = ifelse(tx_perspective == "BNX (Societal)", Proportion, NA),
p_BNX_hs = ifelse(tx_perspective == "BNX (Health Sector)", Proportion, NA),
p_MET_soc = ifelse(tx_perspective == "MET (Societal)", Proportion, NA),
p_MET_hs = ifelse(tx_perspective == "MET (Health Sector)", Proportion, NA))
tbl_df_CEAC_BNX_soc <- tbl_df_CEAC_mid %>% select(Threshold, p_BNX_soc) %>% na.omit()
tbl_df_CEAC_BNX_hs  <- tbl_df_CEAC_mid %>% select(Threshold, p_BNX_hs) %>% na.omit()
tbl_df_CEAC_MET_soc <- tbl_df_CEAC_mid %>% select(Threshold, p_MET_soc) %>% na.omit()
tbl_df_CEAC_MET_hs  <- tbl_df_CEAC_mid %>% select(Threshold, p_MET_hs) %>% na.omit()
tbl_df_CEAC_temp1 <- merge(x = tbl_df_CEAC_BNX_soc, y = tbl_df_CEAC_MET_soc,
by = "Threshold", all.x = TRUE)
tbl_df_CEAC_temp2 <- merge(x = tbl_df_CEAC_temp1, y = tbl_df_CEAC_BNX_hs,
by = "Threshold", all.x = TRUE)
tbl_df_CEAC_plot  <- merge(x = tbl_df_CEAC_temp2, y = tbl_df_CEAC_MET_hs,
by = "Threshold", all.x = TRUE)
tbl_df_CEAC_temp1 <- rbind(tbl_df_CEAC_BNX, tbl_df_CEAC_MET)
tbl_df_CEAC_temp2 <- tbl_df_CEAC_temp1 %>% mutate(p_BNX_soc = ifelse(tx_perspective == "BNX (Societal)", Proportion, NA),
p_BNX_hs = ifelse(tx_perspective == "BNX (Health Sector)", Proportion, NA),
p_MET_soc = ifelse(tx_perspective == "MET (Societal)", Proportion, NA),
p_MET_hs = ifelse(tx_perspective == "MET (Health Sector)", Proportion, NA))
tbl_df_CEAC_BNX_soc <- tbl_df_CEAC_temp2 %>% select(Threshold, p_BNX_soc) %>% na.omit()
tbl_df_CEAC_BNX_hs  <- tbl_df_CEAC_temp2 %>% select(Threshold, p_BNX_hs) %>% na.omit()
tbl_df_CEAC_MET_soc <- tbl_df_CEAC_temp2 %>% select(Threshold, p_MET_soc) %>% na.omit()
tbl_df_CEAC_MET_hs  <- tbl_df_CEAC_temp2 %>% select(Threshold, p_MET_hs) %>% na.omit()
tbl_df_CEAC_temp3 <- merge(x = tbl_df_CEAC_BNX_soc, y = tbl_df_CEAC_MET_soc,
by = "Threshold", all.x = TRUE)
tbl_df_CEAC_temp4 <- merge(x = tbl_df_CEAC_temp3, y = tbl_df_CEAC_BNX_hs,
by = "Threshold", all.x = TRUE)
tbl_df_CEAC_plot  <- merge(x = tbl_df_CEAC_temp4, y = tbl_df_CEAC_MET_hs,
by = "Threshold", all.x = TRUE)
View(tbl_df_CEAC_plot)
#################
### Plot CEAC ###
#################
plot_CEAC <- ggplot() +
geom_line(data = tbl_df_CEAC_plot, aes(x = Threshold, y = p_BNX_hs, linetype = "dashed", color = "#0080C6")) +
geom_line(data = tbl_df_CEAC_plot, aes(x = Threshold, y = p_MET_hs, linetype = "dashed", color = "#FFC20E")) +
geom_line(data = tbl_df_CEAC_plot, aes(x = Threshold, y = p_BNX_soc, linetype = "solid", color = "#313695")) +
geom_line(data = tbl_df_CEAC_plot, aes(x = Threshold, y = p_MET_soc, linetype = "solid", color = "#d7191c")) +
#geom_line(aes(y = p_BNX_CE, colour = "#f46d43")) +
#geom_line(aes(y = p_MET_CE, colour = "#313695")) +
#theme_classic()
theme(panel.grid.major = element_blank(), panel.grid.minor = element_blank(), panel.background = element_blank(), axis.line = element_line(colour = "black"),
legend.key = element_rect(fill = "transparent", colour = "transparent"),
plot.title = element_text(hjust=0.02, vjust=-7),
legend.position = "right",
text = element_text(size = 15))
# Output full plot
ggsave(plot_CEAC,
filename = "Plots/PSA/CEAC.png",
width = 10, height = 7, dpi = 350)
tbl_df_CEAC_BNX <- cbind(tbl_df_labels, tbl_df_CEAC_long) %>% as_tibble() %>% mutate(Treatment = "BNX",
tx_perspective = ifelse(Perspective == "Societal", "BNX (Societal)",
ifelse(Perspective == "Health Sector", "BNX (Health Sector)", NA))) %>%
select(-Scenario) %>% relocate("Proportion", .after = "Treatment")
tbl_df_CEAC_MET <- cbind(tbl_df_labels, tbl_df_CEAC_long) %>% as_tibble() %>% mutate(Treatment = "MET",
Proportion_MET = (1 - Proportion)) %>% select(-Proportion) %>%
rename(Proportion = Proportion_MET) %>%
mutate(tx_perspective = ifelse(Perspective == "Societal", "MET (Societal)",
ifelse(Perspective == "Health Sector", "MET (Health Sector)", NA))) %>%
select(-Scenario)
tbl_df_CEAC_temp1 <- rbind(tbl_df_CEAC_BNX, tbl_df_CEAC_MET)
View(tbl_df_CEAC_temp1)
ggplot(data = tbl_df_CEAC_temp1) +
#geom_line(data = tbl_df_CEAC_plot, aes(x = Threshold, y = p_BNX_hs, linetype = "dashed", color = "#0080C6")) +
#geom_line(data = tbl_df_CEAC_plot, aes(x = Threshold, y = p_MET_hs, linetype = "dashed", color = "#FFC20E")) +
#geom_line(data = tbl_df_CEAC_plot, aes(x = Threshold, y = p_BNX_soc, linetype = "solid", color = "#313695")) +
#geom_line(data = tbl_df_CEAC_plot, aes(x = Threshold, y = p_MET_soc, linetype = "solid", color = "#d7191c")) +
#geom_line(aes(y = p_BNX_CE, colour = "#f46d43")) +
#geom_line(aes(y = p_MET_CE, colour = "#313695")) +
#theme_classic()
geom_line(aes(linetype = Perspective, color = Treatment)) +
theme(panel.grid.major = element_blank(), panel.grid.minor = element_blank(), panel.background = element_blank(), axis.line = element_line(colour = "black"),
legend.key = element_rect(fill = "transparent", colour = "transparent"),
plot.title = element_text(hjust=0.02, vjust=-7),
legend.position = "right",
text = element_text(size = 15))
ggplot(data = tbl_df_CEAC_temp1, x = Threshold, y = Proportion) +
#geom_line(data = tbl_df_CEAC_plot, aes(x = Threshold, y = p_BNX_hs, linetype = "dashed", color = "#0080C6")) +
#geom_line(data = tbl_df_CEAC_plot, aes(x = Threshold, y = p_MET_hs, linetype = "dashed", color = "#FFC20E")) +
#geom_line(data = tbl_df_CEAC_plot, aes(x = Threshold, y = p_BNX_soc, linetype = "solid", color = "#313695")) +
#geom_line(data = tbl_df_CEAC_plot, aes(x = Threshold, y = p_MET_soc, linetype = "solid", color = "#d7191c")) +
#geom_line(aes(y = p_BNX_CE, colour = "#f46d43")) +
#geom_line(aes(y = p_MET_CE, colour = "#313695")) +
#theme_classic()
geom_line(aes(linetype = Perspective, color = Treatment)) +
theme(panel.grid.major = element_blank(), panel.grid.minor = element_blank(), panel.background = element_blank(), axis.line = element_line(colour = "black"),
legend.key = element_rect(fill = "transparent", colour = "transparent"),
plot.title = element_text(hjust=0.02, vjust=-7),
legend.position = "right",
text = element_text(size = 15))
ggplot(data = tbl_df_CEAC_temp1, aes(x = Threshold, y = Proportion)) +
#geom_line(data = tbl_df_CEAC_plot, aes(x = Threshold, y = p_BNX_hs, linetype = "dashed", color = "#0080C6")) +
#geom_line(data = tbl_df_CEAC_plot, aes(x = Threshold, y = p_MET_hs, linetype = "dashed", color = "#FFC20E")) +
#geom_line(data = tbl_df_CEAC_plot, aes(x = Threshold, y = p_BNX_soc, linetype = "solid", color = "#313695")) +
#geom_line(data = tbl_df_CEAC_plot, aes(x = Threshold, y = p_MET_soc, linetype = "solid", color = "#d7191c")) +
#geom_line(aes(y = p_BNX_CE, colour = "#f46d43")) +
#geom_line(aes(y = p_MET_CE, colour = "#313695")) +
#theme_classic()
geom_line(aes(linetype = Perspective, color = Treatment)) +
theme(panel.grid.major = element_blank(), panel.grid.minor = element_blank(), panel.background = element_blank(), axis.line = element_line(colour = "black"),
legend.key = element_rect(fill = "transparent", colour = "transparent"),
plot.title = element_text(hjust=0.02, vjust=-7),
legend.position = "right",
text = element_text(size = 15))
ggplot(data = tbl_df_CEAC_temp1, aes(x = Threshold, y = Proportion)) +
#geom_line(data = tbl_df_CEAC_plot, aes(x = Threshold, y = p_BNX_hs, linetype = "dashed", color = "#0080C6")) +
#geom_line(data = tbl_df_CEAC_plot, aes(x = Threshold, y = p_MET_hs, linetype = "dashed", color = "#FFC20E")) +
#geom_line(data = tbl_df_CEAC_plot, aes(x = Threshold, y = p_BNX_soc, linetype = "solid", color = "#313695")) +
#geom_line(data = tbl_df_CEAC_plot, aes(x = Threshold, y = p_MET_soc, linetype = "solid", color = "#d7191c")) +
#geom_line(aes(y = p_BNX_CE, colour = "#f46d43")) +
#geom_line(aes(y = p_MET_CE, colour = "#313695")) +
#theme_classic()
geom_line(aes(linetype = Perspective, color = Treatment)) +
scale_linetype_manual(values = c("twodash", "solid"))+
scale_color_manual(values=c('#000000','#E69F00'))+
theme(panel.grid.major = element_blank(), panel.grid.minor = element_blank(), panel.background = element_blank(), axis.line = element_line(colour = "black"),
legend.key = element_rect(fill = "transparent", colour = "transparent"),
plot.title = element_text(hjust=0.02, vjust=-7),
legend.position = "right",
text = element_text(size = 15))
plot_CEAC <- ggplot(data = tbl_df_CEAC_temp1, aes(x = Threshold, y = Proportion)) +
#geom_line(data = tbl_df_CEAC_plot, aes(x = Threshold, y = p_BNX_hs, linetype = "dashed", color = "#0080C6")) +
#geom_line(data = tbl_df_CEAC_plot, aes(x = Threshold, y = p_MET_hs, linetype = "dashed", color = "#FFC20E")) +
#geom_line(data = tbl_df_CEAC_plot, aes(x = Threshold, y = p_BNX_soc, linetype = "solid", color = "#313695")) +
#geom_line(data = tbl_df_CEAC_plot, aes(x = Threshold, y = p_MET_soc, linetype = "solid", color = "#d7191c")) +
#geom_line(aes(y = p_BNX_CE, colour = "#f46d43")) +
#geom_line(aes(y = p_MET_CE, colour = "#313695")) +
#theme_classic()
geom_line(aes(linetype = Perspective, color = Treatment)) +
scale_linetype_manual(values = c("twodash", "solid"))+
scale_color_manual(values=c('#000000','#E69F00'))+
theme(panel.grid.major = element_blank(), panel.grid.minor = element_blank(), panel.background = element_blank(), axis.line = element_line(colour = "black"),
legend.key = element_rect(fill = "transparent", colour = "transparent"),
plot.title = element_text(hjust=0.02, vjust=-7),
legend.position = "right",
text = element_text(size = 15))
# Output full plot
ggsave(plot_CEAC,
filename = "Plots/PSA/CEAC.png",
width = 10, height = 7, dpi = 350)
#################
### Plot CEAC ###
#################
plot_CEAC <- ggplot(data = tbl_df_CEAC_temp1, aes(x = Threshold, y = Proportion)) +
#geom_line(data = tbl_df_CEAC_plot, aes(x = Threshold, y = p_BNX_hs, linetype = "dashed", color = "#0080C6")) +
#geom_line(data = tbl_df_CEAC_plot, aes(x = Threshold, y = p_MET_hs, linetype = "dashed", color = "#FFC20E")) +
#geom_line(data = tbl_df_CEAC_plot, aes(x = Threshold, y = p_BNX_soc, linetype = "solid", color = "#313695")) +
#geom_line(data = tbl_df_CEAC_plot, aes(x = Threshold, y = p_MET_soc, linetype = "solid", color = "#d7191c")) +
#geom_line(aes(y = p_BNX_CE, colour = "#f46d43")) +
#geom_line(aes(y = p_MET_CE, colour = "#313695")) +
#theme_classic()
geom_line(aes(linetype = Perspective, color = Treatment)) +
scale_linetype_manual(values = c("twodash", "solid"))+
scale_color_manual(values=c('#000000','#E69F00'))+
scale_x_continuous(labels = scales::dollar_format(scale = .001, suffix = "K")) +
theme(panel.grid.major = element_blank(), panel.grid.minor = element_blank(), panel.background = element_blank(), axis.line = element_line(colour = "black"),
legend.key = element_rect(fill = "transparent", colour = "transparent"),
plot.title = element_text(hjust=0.02, vjust=-7),
legend.position = "right",
text = element_text(size = 15))
# Output full plot
ggsave(plot_CEAC,
filename = "Plots/PSA/CEAC.png",
width = 10, height = 7, dpi = 350)
